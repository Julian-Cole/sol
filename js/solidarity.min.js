var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof e?a:new e(function(b,d){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var d=a[b];a[b]=null;try{d()}catch(n){this.asyncThrow_(n)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}};e.prototype.createResolveAndReject_=function(){function a(a){return function(c){d||(d=!0,a.call(b,c))}}var b=this,d=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(k){this.reject_(k);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)h.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var h=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(n){d.reject(n)}};e.prototype.then=function(a,b){function d(a,b){return"function"==typeof a?function(b){try{c(a(b))}catch(A){f(A)}}:b}var c,f,h=new e(function(a,b){c=a;f=b});this.callWhenSettled_(d(a,c),d(b,f));return h};
e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function d(){switch(c.state_){case 1:a(c.result_);break;case 2:b(c.result_);break;default:throw Error("Unexpected state: "+c.state_);}}var c=this;null==this.onSettledCallbacks_?h.asyncExecute(d):this.onSettledCallbacks_.push(d)};e.resolve=c;e.reject=function(a){return new e(function(b,d){d(a)})};e.race=function(a){return new e(function(b,d){for(var e=$jscomp.makeIterator(a),k=e.next();!k.done;k=e.next())c(k.value).callWhenSettled_(b,
d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c([]):new e(function(a,e){function k(b){return function(d){f[b]=d;n--;0==n&&a(f)}}var f=[],n=0;do f.push(void 0),n++,c(d.value).callWhenSettled_(k(f.length-1),e),d=b.next();while(!d.done)})};return e},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(h){return this.context_.yieldAllIterator_=null,this.context_.throw_(h),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function c(b){return a.throw(b)}return new Promise(function(d,e){function h(a){a.done?d(a.value):Promise.resolve(a.value).then(b,c).then(h,e)}h(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,e){return c==a&&"q"==d&&e==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),d=Object.seal({}),c=new a([[b,2],[d,3]]);if(2!=c.get(b)||3!=c.get(d))return!1;c.delete(b);c.set(d,4);return!c.has(b)&&4==c.get(d)}catch(x){return!1}}function c(){}function d(a){var b=typeof a;return"object"===b&&null!==a||"function"===b}function e(a){if(!$jscomp.owns(a,f)){var b=new c;$jscomp.defineProperty(a,f,{value:b})}}function h(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof
c)return a;e(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var f="$jscomp_hidden_"+Math.random();h("freeze");h("preventExtensions");h("seal");var l=0,k=function(a){this.id_=(l+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};k.prototype.set=function(a,b){if(!d(a))throw Error("Invalid WeakMap key");e(a);if(!$jscomp.owns(a,f))throw Error("WeakMap key fail: "+
a);a[f][this.id_]=b;return this};k.prototype.get=function(a){return d(a)&&$jscomp.owns(a,f)?a[f][this.id_]:void 0};k.prototype.has=function(a){return d(a)&&$jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};k.prototype.delete=function(a){return d(a)&&$jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return k},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=d.get(b)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var c=d.entries(),e=c.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=c.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!c.next().done?!1:!0}catch(x){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbolIterator();var c=new WeakMap,d=function(a){this.data_={};this.head_=f();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};d.prototype.set=function(a,b){a=0===a?0:a;var d=e(this,a);d.list||(d.list=this.data_[d.id]=[]);d.entry?d.entry.value=b:(d.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},d.list.push(d.entry),this.head_.previous.next=d.entry,this.head_.previous=d.entry,this.size++);return this};d.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};d.prototype.has=function(a){return!!e(this,a).entry};
d.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};d.prototype.entries=function(){return h(this,function(a){return[a.key,a.value]})};d.prototype.keys=function(){return h(this,function(a){return a.key})};d.prototype.values=function(){return h(this,function(a){return a.value})};d.prototype.forEach=function(a,b){for(var d=this.entries(),c;!(c=d.next()).done;)c=c.value,a.call(b,c[1],c[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(a,b){var d=b&&typeof b;"object"==
d||"function"==d?c.has(b)?d=c.get(b):(d=""+ ++l,c.set(b,d)):d="p_"+b;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var f=e[a];if(b!==b&&f.key!==f.key||b===f.key)return{id:d,list:e,index:a,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},h=function(a,b){var d=a.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=a.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:b(d)};d=null}return{done:!0,value:void 0}})},f=function(){var a={};return a.previous=
a.next=a.head=a},l=0;return d},"es6","es3");
$jscomp.polyfill("Set",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([b]));if(!c.has(b)||1!=c.size||c.add(b)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var h=c.entries(),f=h.next();if(f.done||f.value[0]!=b||f.value[1]!=b)return!1;f=h.next();return f.done||f.value[0]==b||4!=f.value[0].x||f.value[1]!=f.value[0]?!1:h.next().done}catch(l){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbolIterator();var c=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};c.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};c.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};c.prototype.clear=function(){this.map_.clear();
this.size=0};c.prototype.has=function(a){return this.map_.has(a)};c.prototype.entries=function(){return this.map_.entries()};c.prototype.values=function(){return this.map_.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=c.prototype.values;c.prototype.forEach=function(a,b){var d=this;this.map_.forEach(function(c){return a.call(b,c,c,d)})};return c},"es6","es3");
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");var gbl_MODE="";gbl_MODE="LOCAL";gbl_MODE="LIVE";
var gblVersion="0.7.2",Solidarity={},sol=Solidarity,sh={},g={w:-1,h:-1,device:{isMobile:!1,isTablet:!1,isPC:!1},preferences:{date_format:1,sounds:!1},state:{bFirstRunSession:!1,isSplashScreen:!0,isChannelExists:!1},solid:{sh:{},pod:{},session:{},pti:{},name:"",photo:"",friends:{list:[],count:0,webIds:[],onAllFriendsLoaded_Callback:function(){}},role:{},storage:{},inbox:[],user_inbox:{},isLogged:!1,webId:"",instances:{longchat:"",chat:""},websockets:function(){},websockets_attached:!1},date:{day:"",
month:"",year:"",offset:0},active_channel:{sh:{},pod:{},pti:{},name:"",photo:"",friends:{},role:{},storage:{},long_chat_instance:{},chat:{},chat_pages:{},chat_messages:[],chat_messages_postfix:[],chat_messages_prefix:[],bPullFromLocalStor:!1,long_chat_instance_isPrivate:!1},favourite_channels:{selected:0,list:[{channel_name:"Solidarity",channel_url:"https://solidarity.inrupt.net"},{channel_name:"Shighl/Shighl",channel_url:"https://solidarity.inrupt.net"}]}},TYPE_LONG_CHAT_RENDER_MODE={TYPE_REPLACE:0,
TYPE_PREFFIX:1,TYPE_POSTFIX:2},UIX={Mobile:{BurgerMenuShow:function(){TweenMax.to($("#mobile_burger_menu_slideout"),.25,{width:g.w,delay:.5})},UserMenuShow:function(){},MainMenuShow:function(){}}},db_findingChannelInstance=!1,db_chatPages=!1,db_chatMessages=!1;function trace(a){console.log(a)}function setScrollerToBottom(a){a=document.getElementById(a);a.scrollTop=a.scrollHeight}function padLeadingZero(a){return 10>a?"0"+a:a}
function trimTrailingChars(a,b){return a.replace(new RegExp(b+"+$"),"")}function openwindow(a){return(a=window.open(a,"_blank"))?(a.focus(),!0):!1}function crypto_getSHA1Hash(a){var b=new jsSHA("SHA-1","TEXT");b.update(a);return b.getHash("HEX")}function crypto_vernam(a,b){var c=b.length,d=String.fromCharCode;return a.replace(/[\s\S]/g,function(a,h){return d(b.charCodeAt(h%c)^a.charCodeAt(0))})}(function(a){a.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()}})(jQuery);
String.prototype.contains=function(a){return-1!==this.indexOf(a)};String.prototype.searchAndReplace=function(a,b){return this.split(a).join(b)};function clone_jquery(a){return $.extend(!0,{},a)}function clone_jq(a){return $.extend(!0,{},a)}Object.size=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};
var clone=function(){function a(b,l,k,n,w){function f(b,k){if(null===b)return null;if(0===k||"object"!=typeof b)return b;if(b instanceof d)var m=new d;else if(b instanceof e)m=new e;else if(b instanceof h)m=new h(function(a,d){b.then(function(b){a(f(b,k-1))},function(a){d(f(a,k-1))})});else if(a.__isArray(b))m=[];else if(a.__isRegExp(b))m=new RegExp(b.source,c(b)),b.lastIndex&&(m.lastIndex=b.lastIndex);else if(a.__isDate(b))m=new Date(b.getTime());else{if(z&&Buffer.isBuffer(b))return m=new Buffer(b.length),
b.copy(m),m;if(b instanceof Error)m=Object.create(b);else if("undefined"==typeof n){var q=Object.getPrototypeOf(b);m=Object.create(q)}else m=Object.create(n),q=n}if(l){var p=x.indexOf(b);if(-1!=p)return y[p];x.push(b);y.push(m)}if(b instanceof d)for(p=b.keys();;){var t=p.next();if(t.done)break;var v=f(t.value,k-1);t=f(b.get(t.value),k-1);m.set(v,t)}if(b instanceof e)for(p=b.keys();;){t=p.next();if(t.done)break;t=f(t.value,k-1);m.add(t)}for(var r in b){var u;q&&(u=Object.getOwnPropertyDescriptor(q,
r));u&&null==u.set||(m[r]=f(b[r],k-1))}if(Object.getOwnPropertySymbols)for(u=Object.getOwnPropertySymbols(b),r=0;r<u.length;r++)if(p=u[r],q=Object.getOwnPropertyDescriptor(b,p),!q||q.enumerable||w)m[p]=f(b[p],k-1),q.enumerable||Object.defineProperty(m,p,{enumerable:!1});if(w)for(u=Object.getOwnPropertyNames(b),r=0;r<u.length;r++)p=u[r],q=Object.getOwnPropertyDescriptor(b,p),q&&q.enumerable||(m[p]=f(b[p],k-1),Object.defineProperty(m,p,{enumerable:!1}));return m}"object"===typeof l&&(k=l.depth,n=l.prototype,
w=l.includeNonEnumerable,l=l.circular);var x=[],y=[],z="undefined"!=typeof Buffer;"undefined"==typeof l&&(l=!0);"undefined"==typeof k&&(k=Infinity);return f(b,k)}function b(a){return Object.prototype.toString.call(a)}function c(a){var b="";a.global&&(b+="g");a.ignoreCase&&(b+="i");a.multiline&&(b+="m");return b}try{var d=Map}catch(f){d=function(){}}try{var e=Set}catch(f){e=function(){}}try{var h=Promise}catch(f){h=function(){}}a.clonePrototype=function(a){if(null===a)return null;var b=function(){};
b.prototype=a;return new b};a.__objToStr=b;a.__isDate=function(a){return"object"===typeof a&&"[object Date]"===b(a)};a.__isArray=function(a){return"object"===typeof a&&"[object Array]"===b(a)};a.__isRegExp=function(a){return"object"===typeof a&&"[object RegExp]"===b(a)};a.__getRegExpFlags=c;return a}();"object"===typeof module&&module.exports&&(module.exports=clone);function string__getURLPath(a){return a.match(/(https?:\/\/[^\s]+)/g)}
function string__getTextFromTextAndURL(a){return a.replace(/(https?:\/\/[^\s]+)/g,function(a){return""})}function string__isYouTubeLink(a){return-1!==a.indexOf("https://www.youtube.com/watch?v=")?"https://www.youtube.com/embed/"+a.split("https://www.youtube.com/watch?v=").join("")+"?controls=0":!1}function string__isImageLink(a){a=a.toLowerCase();var b=1<a.split(".jpg").length?!0:!1,c=1<a.split(".png").length?!0:!1,d=1<a.split(".gif").length?!0:!1;return b||c||d?a:!1}
function string__urlify(a){return a.replace(/(https?:\/\/[^\s]+)/g,function(a){return'<a href="'+a+'">'+a+"</a>"})}String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.contains=function(a){return-1!==this.indexOf(a)};String.prototype.searchAndReplace=function(a,b){return this.split(a).join(b)};
var Templates={Item:{name:"",value:""},template_list:[],Create:function(a){try{this.template_list.push({name:a.name,value:$(a.value).comments().html().toString()})}catch(b){trace("TEMPLATE ERROR! "+a.name)}},Get:function(a){for(var b=0;b<this.template_list.length;b++)if(this.template_list[b].name===a)return this.template_list[b].value;return!1},GetWithReplace:function(a,b){for(var c=0;c<this.template_list.length;c++)if(this.template_list[c].name===a){a=this.template_list[c].value;for(c=0;c<b.length;c++)a=
a.searchAndReplace(b[c].search,b[c].replace);return a}}};function List(){this.items=[];this.add=function(a){this.items.push(a)};this.length=function(){return this.items.length};this.addUnique=function(a){for(var b=!1,c=0,d=0;d<this.items.length;d++)this.items[d].name==a.name&&(b=!0,c++);if(1==b)return c;this.items.push(a);return!1};this.remove=function(a){var b=!1;a=this.items.indexOf(a);-1<a&&(b=!0,this.items.splice(a,1));return b}}
Solidarity={Responsive:{ArrangeViewport:function(){g.device.isPC&&($("#uix_baseframe_banner_tr").css("left",g.w-49),$("#uix_baseframe_banner_bm").css("width",g.w-51),$("#uix_baseframe_banner_rh").css("left",g.w-26),$("#uix_baseframe_banner_lh").css("height",g.h-49),$("#uix_baseframe_banner_rh").css("height",g.h-49),$("#uix_baseframe_frame_bl").css("top",g.h-47),$("#uix_baseframe_frame_br").css("top",g.h-47).css("left",g.w-48),$("#uix_baseframe_frame_bm").css("top",g.h-25),$("#div_main_tab_burger").css("left",
g.w-80),$("#div_chatviewportbg").css("height",g.h-190).css("width",g.w-258),$("#div_chatter_container").css("width",g.w-267).css("height",g.h-280),$("#div_inputconsole__loggedin__avatar_container").css("left",225).css("top",g.h-110),$("#div_chatviewport_inputconsole").css("top",g.h-120).css("width",g.w-343),$("#modal_preferences").css("width",400),$("#modal_add_channel").css("width",400),$("#modal_manage_channels").css("width",400),$("#logged_in_pc").css("left",g.w-324).css("top",g.h-90),g.state.isSplashScreen&&
($("#div_index_splash_pc").css("display","inline"),$("#div_index_splash_tab").css("display","none"),$("#div_index_splash_mob").css("display","none")));g.device.isTablet&&($("#div_mob_chatviewportbg").css("width",g.w).css("height",g.h-40),$("#div_mob_chatter_container").css("width",g.w).css("height",g.h-120),$("#div_mob_inbox_container").css("width",g.w-15).css("height",g.h-10),$("#div_mob_inbox_container__msg_view").css("width",g.w-15).css("height",g.h-10),$("#div_mob_inbox_container__composeview").css("width",
g.w-15).css("height",g.h-10),$("#div_mob_inputconsole__loggedin__avatar_container").css("left",5).css("top",g.h-50+3),$("#div_mob_chatviewport_inputconsole").css("top",g.h-65).css("width",g.w-41),$("#modal_preferences").css("width",350),$("#modal_add_channel").css("width",350),$("#modal_manage_channels").css("width",350),g.state.isSplashScreen&&($("#div_index_splash_pc").css("display","none"),$("#div_index_splash_tab").css("display","inline"),$("#div_index_splash_mob").css("display","none")));g.device.isMobile&&
($("#div_mob_chatviewportbg").css("width",g.w).css("height",g.h-40),$("#div_mob_chatter_container").css("width",g.w).css("height",g.h-120),$("#div_mob_inbox_container").css("width",g.w-15).css("height",g.h-10),$("#div_mob_inbox_container__msg_view").css("width",g.w-15).css("height",g.h-10),$("#div_mob_inbox_container__composeview").css("width",g.w-15).css("height",g.h-10),$("#div_mob_inputconsole__loggedin__avatar_container").css("left",5).css("top",g.h-50+3),$("#div_mob_chatviewport_inputconsole").css("top",
g.h-65).css("width",g.w-41),$("#modal_preferences").css("width",350),$("#modal_add_channel").css("width",350),$("#modal_manage_channels").css("width",350),g.state.isSplashScreen&&($("#div_index_splash_pc").css("display","none"),$("#div_index_splash_tab").css("display","none"),$("#div_index_splash_mob").css("display","inline")))},DeviceView:function(){0<g.w&737>g.w&&(g.device.isPC=!1,g.device.isTablet=!1,g.device.isMobile=!0,$("#div_pc").css("display","none"),$("#div_tab").css("display","none"),$("#div_mob").css("display",
"inline"));736<g.w&1068>g.w&&(g.device.isPC=!1,g.device.isTablet=!0,g.device.isMobile=!1,$("#div_pc").css("display","none"),$("#div_tab").css("display","none"),$("#div_mob").css("display","inline"));1067<g.w&&(g.device.isPC=!0,g.device.isTablet=!1,g.device.isMobile=!1,$("#div_pc").css("display","inline"),$("#div_tab").css("display","none"),$("#div_mob").css("display","none"))}}};window.onresize=function(){g.w=$(window).width();g.h=$(window).height();Solidarity.Responsive.DeviceView();Solidarity.Responsive.ArrangeViewport()};
Templates.template_list.push({name:"ListSimple",value:'<p>@lbl_header@</p><ul id="@ID@" style="list-style-type:none;">@BODY@</ul><p>@lbl_footer@</p><div><button onclick="javascript:@INSTANCE@_add();" type="button">Add</button><button onclick="javascript:@INSTANCE@_edit();" type="button">Edit</button><button onclick="javascript:@INSTANCE@_remove();" type="button">remove</button></div>'});Templates.template_list.push({name:"ListSimple_Item",value:'<li onclick="javascript:@INSTANCE@__onClick(@ID@)" style="cursor:pointer;" >@lbl_item@</li>'});
Templates.template_list.push({name:"ListSimple_Item_Style_Radio",value:'<li onclick="javascript:@INSTANCE@__onClick(@ID@)" style="cursor:pointer;"><input id="@INSTANCE@__item@ID@" type="radio">@lbl_item@</li>'});Templates.template_list.push({name:"ListSimple_Item_Style1",value:'<li onclick="javascript:@INSTANCE@__onClick(@ID@)" style="cursor:pointer;" >@lbl_item@</li>'});Templates.template_list.push({name:"ListSimple_Input",value:'<p><input type="text" name="@tf_item@">:item</p>'});
Templates.template_list.push({name:"Chatter_Item",value:'<div id="divviewportpcbg_@GUID@" class="@CLASS@"  style="position:relative; width:98%; height:auto; background-color:#855FFA-; border-left-color:#855FFA; border-left-style:@BORDER@ ; border-left-width: 2px"><div id="divviewportpcavatar_@GUID@" class="@CLASS@" style="position:absolute; left:22px; top:8px; width:29px; height:29px; background-image:url(\'images/no-avatar.png\'); background-size:contain; opacity:.3"></div><div id="divviewportpcavatar_@GUID@" class="@CLASS@" style="position:absolute; left:22px; top:8px; width:29px; height:29px; background-image:url(\'@AVATAR@\'); background-size:contain;"> </div><div id="divviewportpcname_@GUID@" class="@CLASS@"  style="position:absolute; left:60px; top:4px; width:auto; height:auto;  text-align:left;"><font face="Roboto" style="color:#855FFA; font-size:14px;font-weight:700"><span id="@LBL_ID@">@LBL_NAME@</span></font></div><div id="divviewportpcmsg_@GUID@" class="@CLASS@"  style="position:relative; padding-left:61px; padding-top:21px; padding-bottom: 5px; width:70%; height:auto;  text-align:left;"><font face="Roboto" style="color:#303030; font-size:14px; font-weight:400"><span id="@LBL_ID@">@LBL_CONTENT@</span></font></div><div id="divviewportpctime_@GUID@" class="@CLASS@"  style="float:right; margin-top:-40px; width:190px; height:auto;  opacity:.5; text-align:left;"><font face="Roboto" style="color:#A5A5A5; font-size:14px;font-weight:bold;"><span id="@LBL_ID@">@LBL_TIME@</span></font></div><div id="divviewportpcburger_@GUID@" style="float:right; margin-top:-40px; margin-right:0px; text-align:right;"><div class="ui simple dropdown item"><i class="bars icon" style="color:#333333 !important; margin-top:0px;"></i><div class="menu" style="margin-left:-105px !important;"><div class="item" onclick="_()">!Quote</div><div class="item" onclick="_()">!Bookmark</div><div class="item" onclick="_()">!Mark as Topic</div><div class="item" onclick="_()">!Mark as Question</div><div class="item" onclick="_()">!Flag</div></div></div></div><div style="position:absolute; left:22px; top:8px; width:29px; height:29px;"><div class="avatar" style="width:29px; height:29px; background-color:#800000-"></div><div class="ui special popup"><div class="ui card"><div class="image"><img src="@AVATAR@"></div><div class="content"><a class="header">@LBL_NAME@</a><div class="meta"><a href="@LBL_WEBID@" target="_blank"><span style="font-size:12px;">@LBL_WEBID@</span></a></div></div></div></div></div></div>'});
Templates.template_list.push({name:"Chatter_Item_mob",value:'<div id="divviewportpcbg_@GUID@" class="@CLASS@"  style="position:relative; width:98%; height:auto; background-color:#dedede-"><div id="divviewportpcavatar_@GUID@" class="@CLASS@" style="position:absolute; left:0px; top:8px; width:29px; height:29px; background-image:url(\'images/no-avatar.png\'); background-size:contain; opacity:.3"></div><div id="divviewportpcavatar_@GUID@" class="@CLASS@" style="position:absolute; left:0px; top:8px; width:29px; height:29px; background-image:url(\'@AVATAR@\'); background-size:contain;"> </div><div id="divviewportpcname_@GUID@" class="@CLASS@"  style="position:absolute; left:35px; top:4px; width:auto; height:auto;  text-align:left;"><font face="Roboto" style="color:#855FFA; font-size:13px;font-weight:700"><span id="@LBL_ID@">@LBL_NAME@</span></font></div><div id="divviewportpcmsg_@GUID@" class="@CLASS@"  style="position:relative; padding-left:36px; padding-top:23px; padding-bottom: 5px; width:90%; height:auto;  text-align:left;"><font face="Roboto" style="color:#303030; font-size:13px; font-weight:400"><span id="@LBL_ID@">@LBL_CONTENT@</span></font><font face="Roboto" style="color:#C5C5C5; font-size:13px;font-weight:normal;"><span id="@LBL_ID@">@LBL_TIME@</span></font></div><div id="divviewportpcburger_@GUID@" style="float:right; margin-top:-40px; margin-right:-10px; text-align:right;"><div class="ui simple dropdown item"><i class="bars icon" style="color:#333333 !important; margin-top:0px;"></i><div class="menu" style="margin-left:-135px !important;"><div class="item" onclick="_()">!Quote</div><div class="item" onclick="_()">!Bookmark</div><div class="item" onclick="_()">!Mark as Topic</div><div class="item" onclick="_()">!Mark as Question</div><div class="item" onclick="_()">!Flag</div></div></div></div><div style="position:absolute; left:22px; top:8px; width:29px; height:29px;"><div class="avatar" style="width:29px; height:29px; background-color:#800000-"></div><div class="ui special popup"><div class="ui card"><div class="image"><img src="@AVATAR@"></div><div class="content"><a class="header">@LBL_NAME@</a><div class="meta"><a href="@LBL_WEBID@" target="_blank"><span style="font-size:12px;">@LBL_WEBID@</span></a></div></div></div></div></div></div></div>'});
Templates.template_list.push({name:"Friend_Item",value:'<div style="float:left; width:30px; height:30px; margin-right:5px; margin-bottom: 5px; position:relative; opacity:@OPACITY@"><div style="position:absolute; left:0px; top:0px; width:30px; height:30px; background-image:url(\'@AVATAR@\'); background-size:contain;"></div><div style="position:absolute; left:23px; top:-7px; width:10px; height:10px;">@STATUS@</div></div>'});Templates.template_list.push({name:"Inbox_Item",value:'<div style="position:relative;"><div><div style="float:right; width:160px; height:40px; font-size:13px; font-weight:bold; color:#bbbbbb; margin-bottom:-38px; margin-right:5px; text-align:right"><span>@DATETIME@</span></div><div style="clear:both"></div><div style="float:left; width:27px; height:40px"><input id="cb_inbox_messages_@ID@" onclick="solid_inbox__messageView_checkbox_onclick(@ID@)" type="checkbox" tabindex="0" class="hidden"></div><div onclick="solid_inbox__messageView_onclick(@ID@)" style="float:left; width:auto; height:40px; max-width:90%;  cursor:pointer" ><div style="font-size:15px; font-weight:bold; margin-left:0px; margin-top:-1px"><span>@SENDER@</span></div><div style="font-size:13px; font-weight:normal; margin-left:0px; margin-top:0px; width:auto; height:20px; overflow: hidden"><span>@TEXT@</span></div></div><div style="clear:both"></div></div><div style="width:90%; height:15px"></div></div>'});
Templates.template_list.push({name:"Inbox_Item_Message",value:'<div style="margin-top:15px;"><div><img class="ui avatar image" src="https://julian-cole.inrupt.net/profile/FAEE1A1C-1CCE-4F6E-8162-5E063D506B98_2.jpg">&nbsp;<span style="font-weight:bold">@SENDER@</span><span style="color:#bbbbbb; padding-left:10px">@DATETIME@</span></div><div style="margin-top:15px; max-width:85%"><span style="font-weight:normal; font-size:16px">SUBJECT:&nbsp;&nbsp;</span><span style="font-weight:bold; font-size:16px">@LABEL@</span></div><div style="margin-top:10px; max-width:85%"><span style="font-size:14px">@TEXT@</span></div></div>'});
function Mannequin(){this.ListSimple=function(a){this.types={type_label:1,type_radio:2,type_checkbox:3};this._pattern=this.types.type_checkbox;this._data={_items:[],_parent:"",_selected:-1,_selected_items:[],_disabled_items:[],_disabled:!1,_max:1E3,_min:0};this.onDraw;this.add=function(a){this._data._items.push(a);this._data._selected=this._data._items.length-1;if(this.onRenderItem)this.onRenderItem(a)};this.remove=function(){};this.edit=function(){};this.delete=function(){};this.init=function(){};
this.draw=function(){var a={_parent:this._data._parent,_items:this._data._items,_this:this};if(this.onDraw)this.onDraw(a);else{for(var c="",d=0;d<a._items.length;d++){var e=Templates.Get("ListSimple_Item_Style_Radio");e=e.searchAndReplace("@lbl_item@",a._items[d].label);e=e.searchAndReplace("@INSTANCE@",g.m_todolist._data._parent);e=e.searchAndReplace("@ID@",d);c+=e}c=Templates.GetWithReplace("ListSimple",[{search:"@lbl_header@",replace:"This is our shopping list."},{search:"@lbl_footer@",replace:"You have "+
a._items.length+" items in your shopping list."},{search:"@INSTANCE@",replace:g.m_todolist._data._parent},{search:"@BODY@",replace:c}]);$("#"+a._parent).html(c)}};this.saveToSession=function(){};this.saveToLocal=function(){};this.saveToServer=function(){}}}var manne=new Mannequin;
function Pod(a){var b=this,c,d,e,h,f,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return b.sh=new Shighl,b.pod=new sh.pod,b.pod.webId=a,c=b,k.yield(pod.name,2);case 2:return c.name=k.yieldResult,d=b,k.yield(pod.photo,3);case 3:return d.photo=k.yieldResult,e=b,k.yield(pod.friends,4);case 4:return e.friends=k.yieldResult,h=b,k.yield(pod.pti,5);case 5:return h.pti=k.yieldResult,f=b,k.yield(pod.role,6);case 6:return f.role=k.yieldResult,l=b,k.yield(pod.storage,
7);case 7:l.storage=k.yieldResult,k.jumpToEnd()}})}
function init(){function a(a){console.log("WebId: ",a);null!=a?(console.log("Already Logged in as "+a),g.solid.isLogged=!0,g.solid.webId=a,g.solid.pod.webId=a,solid_login__getNameAndPhoto(),sapi.init(function(a){solid_friends__getFriends()})):g.solid.session.login()}trace(" **********************************************");trace(" S O L I D A R I T Y     Version "+gblVersion);trace(" **********************************************");$(".tabular.menu .item").tab({history:!1});$.tab("change tab","tab_chatter");
$(".ui.checkbox").checkbox();$(".ui.rating").rating();g.device.isPC&&$("#div_index_splash_pc").css("display","inline");g.device.isTablet&&$("#div_index_splash_mob").css("display","inline");g.device.isMobile&&$("#div_index_splash_mob").css("display","inline");var b=showdown.getDefaultOptions();trace(b);showdown.setOption("ghMentions","true");showdown.setOption("emoji","true");showdown.setOption("tasklists","true");showdown.setOption("ghMentionsLink","javascript:solid_inbox__mentions_clicked('{u}');");
g.solid.sh=new Shighl;g.solid.session=new g.solid.sh.session;g.solid.pod=new g.solid.sh.pod;b=g.solid.sh.version;$("#sp_lblSplashVersion").html("v&nbsp;"+gblVersion+" / "+(null==b?"n/a":b));$("#sp_lblSplashVersionTab").html("v&nbsp;"+gblVersion+" / "+(null==b?"n/a":b));$("#sp_lblSplashVersionMob").html("v&nbsp;"+gblVersion+" / "+(null==b?"n/a":b));(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield(g.solid.session.track(a),0)})})();$("#div_chatter_container").scroll(function(){0==
$("#div_chatter_container").scrollTop()&&trace("top fo scroller")});$("#div_mob_chatter_container").scroll(function(){0==$("#div_mob_chatter_container").scrollTop()&&trace("top of scroller")});solid_channel__attachAddNewChannelEvents();b=new Date;g.date.day=padLeadingZero(b.getDate())+"";g.date.month=padLeadingZero(b.getMonth()+1)+"";g.date.year=b.getFullYear()+"";g.date.offset=b.getTimezoneOffset()/60;trace("Year-Month-Day: "+g.date.year+"-"+g.date.month+"-"+g.date.day);window.sfx_new_chat=new Howl({src:["audio/Pling-KevanGC-1485374730.mp3"]});
$("#ta_preferences_private_key").val("");b=new JSEncrypt;b.setKey("");var c=b.encrypt("test");b.decrypt(c);console.log("*****************************************************************************");console.log(c);console.log("*****************************************************************************");cookie.get("fBoot")?(g.favourite_channels=JSON.parse(cookie.get("Channels")),g.preferences=JSON.parse(cookie.get("Preferences")),trace("g.favourite_channels="),trace(g.favourite_channels)):(cookie.set("fBoot",
!0),cookie.set("Channels",JSON.stringify(g.favourite_channels)),cookie.set("Preferences",JSON.stringify(g.preferences)));solid_channels__displayFavouriteChannels();solid_long_chat__setChannel(g.favourite_channels.list[g.favourite_channels.selected].channel_url,g.favourite_channels.list[g.favourite_channels.selected].channel_name)}
function init__splash_enterClicked(){g.state.isSplashScreen=!1;$("#div_index_splash_pc").css("display","none");$("#div_index_splash_tab").css("display","none");$("#div_index_splash_mob").css("display","none")}
function notifyMe(a){window.Notification?"granted"===Notification.permission?new Notification(a.title,{body:a.body,icon:a.icon}):Notification.requestPermission().then(function(b){"granted"===b?new Notification(a.title,{body:a.body,icon:a.icon}):console.log("User blocked notifications.")}).catch(function(a){console.error(a)}):console.log("Browser does not support notifications.")}function div_todolist_add(){alert("add clicked!")}
function div_todolist__onClick(a){for(var b=0;b<g.m_todolist._data._items.length;b++)$("#"+g.m_todolist._data._parent+"__item"+b).prop("checked",!1);$("#"+g.m_todolist._data._parent+"__item"+a).prop("checked",!0);g.m_todolist._data._selected=a}function navigation__chatterModeClicked(){}function navigation_tabs_onclick(a){}function navigation__findOutMore(){openwindow("https://github.com/scenaristeur/solidarity")}
function navigation__mob__channels_select(){$("#div_mob__channels_select").sidebar("setting","transition","overlay").sidebar("toggle")}function navigation__mob__channels_select__onclick(a){$("#div_mob__channels_select").sidebar("setting","transition","overlay").sidebar("toggle");solid_channels__changeChannels(a)}
function navigation__showPage(a){switch(a){case "CHATTER":navigation__hideAllPages();solid_long_chat__showChatter();break;case "INBOX":navigation__hideAllPages(),solid_inbox__showInbox()}}function navigation__hideAllPages(){solid_long_chat__hideChatter();solid_inbox__hideInbox()}
function solid_login__ShowAsLoggedIn(a,b){$("#div_banner__account__loggedin__name").html(b);$("#div_tab_banner__account__loggedin__name").html(b);$("#div_mob_banner__account__loggedin__name").html(b);null!=a?($("#div_banner__account__loggedin__avatar").css("background-image","url('"+a+"')"),$("#div_inputconsole__loggedin__avatar").css("background-image","url('"+a+"')"),$("#div_tab_banner__account__loggedin__avatar").css("background-image","url('"+a+"')"),$("#div_tab_inputconsole__loggedin__avatar").css("background-image",
"url('"+a+"')"),$("#div_mob_banner__account__loggedin__avatar").css("background-image","url('"+a+"')"),$("#div_mob_inputconsole__loggedin__avatar").css("background-image","url('"+a+"')")):($("#div_banner__account__loggedin__avatar").css("background-image","url('images\no-avatar.png')"),$("#div_inputconsole__loggedin__avatar").css("background-image","url('images\no-avatar.png')"),$("#div_tab_banner__account__loggedin__avatar").css("background-image","url('images\no-avatar.png')"),$("#div_tab_inputconsole__loggedin__avatar").css("background-image",
"url('images\no-avatar.png')"),$("#div_mob_banner__account__loggedin__avatar").css("background-image","url('images\no-avatar.png')"),$("#div_mob_inputconsole__loggedin__avatar").css("background-image","url('images\no-avatar.png')"));$("#div_banner__account__loggedout").css("display","none");$("#div_tab_banner__account__loggedout").css("display","none");$("#div_mob_banner__account__loggedout").css("display","none");$("#div_banner__account__loggedin").css("display","inline");$("#div_tab_banner__account__loggedin").css("display",
"inline");$("#div_mob_banner__account__loggedin").css("display","inline");$("#div_inputconsole__loggedin__avatar_container").css("display","inline");$("#div_tab_inputconsole__loggedin__avatar_container").css("display","inline");$("#div_mob_inputconsole__loggedin__avatar_container").css("display","inline")}
function solid_login__ShowAsLoggedOut(){$("#div_banner__account__loggedin__name").html("");$("#div_banner__account__loggedin__avatar").css("background-image","url('')");$("#div_banner__account__loggedin").css("display","none");$("#div_banner__account__loggedout").css("display","inline");$("#div_mob_banner__account__loggedin__name").html("");$("#div_mob_banner__account__loggedin__avatar").css("background-image","url('')");$("#div_mob_banner__account__loggedin").css("display","none");$("#div_mob_banner__account__loggedout").css("display",
"inline");$("#div_inputconsole__loggedin__avatar_container").css("display","none");$("#div_mob_inputconsole__loggedin__avatar_container").css("display","none")}
function solid_login__getNameAndPhoto(){var a,b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return trace("solid_login__getNameAndPhoto() -> FIRED!"),a=g.solid,e.yield(g.solid.pod.photo,2);case 2:return a.photo=e.yieldResult,b=g.solid,e.yield(g.solid.pod.name,3);case 3:return b.name=e.yieldResult,c=g.solid,e.yield(g.solid.pod.role,4);case 4:return c.role=e.yieldResult,d=g.solid,e.yield(g.solid.pod.storage,5);case 5:d.storage=e.yieldResult,solid_login__ShowAsLoggedIn(g.solid.photo,
g.solid.name),solid_friends__getStatusOfMe(),solid_inbox__init(),e.jumpToEnd()}})}function solid_login__login(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){console.log("trying to login..");g.solid.session.login();a.jumpToEnd()})}function solid_login__logout(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){trace("solid_login__logout() -> FIRED!");g.solid.session.logout();g.solid.isLogged=!1;solid_login__ShowAsLoggedOut();a.jumpToEnd()})}
function solid_long_chat__getPublicTypeIndex(a,b,c){var d,e,h,f,l,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return db_findingChannelInstance&&trace("Trying to retrieve PublicTypeInstance for "+a),g.active_channel.sh=new Shighl,g.active_channel.pod=new g.active_channel.sh.pod,g.active_channel.pod.webId=a,d=g.active_channel,n.yield(g.active_channel.pod.pti,2);d.pti=n.yieldResult;db_findingChannelInstance&&trace(g.active_channel.pti);e=b;h=c;f=e+"/public/"+
h+"/index.ttl#this";l=e+"/private/"+h+"/index.ttl#this";k=!1;db_findingChannelInstance&&trace("Searching for Long-chat channel: "+f+" in the public type index");g.active_channel.pti.instances.forEach(function(a){db_findingChannelInstance&&(trace("searching PTI for.. "+f),trace(a));"LongChat"==a.shortClass&(a.url==f|a.url==l)&&(a.url==l?(db_findingChannelInstance&&trace("This chat is PRIVATE"),g.active_channel.long_chat_instance_isPrivate=!0):(db_findingChannelInstance&&trace("This chat is PUBLIC"),
g.active_channel.long_chat_instance_isPrivate=!1),db_findingChannelInstance&&trace("Found Target long-chat CHANNEL"),k=a,g.active_channel.long_chat_instance=a)});db_findingChannelInstance&&trace(k);solid_long_chat__initLongChatInstance(!1);n.jumpToEnd()})}
function solid_long_chat__initLongChatInstance(a){var b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:if(a){d.jumpTo(2);break}g.active_channel.chat=new g.active_channel.sh.chat;g.active_channel.chat.instance=g.active_channel.long_chat_instance;b=g.active_channel;return d.yield(g.active_channel.chat.init,3);case 3:b.chat_pages=d.yieldResult,g.active_channel.chat.subscribe=solid_long_chat__subscribe_onReceivedMessage,db_chatPages&&trace("chat.init -> Called!"),
db_chatPages&&trace(g.active_channel.chat_pages);case 2:return c=g.active_channel,d.yield(g.active_channel.chat.messages,4);case 4:c.chat_messages=d.yieldResult,solid_long_chat__renderMessages({type:TYPE_LONG_CHAT_RENDER_MODE.TYPE_REPLACE,mark_as_unread:!1}),d.jumpToEnd()}})}
function solid_long_chat__renderMessages(a){db_chatMessages&&trace(g.active_channel.chat_messages);var b=new showdown.Converter,c="",d=[];a.type==TYPE_LONG_CHAT_RENDER_MODE.TYPE_REPLACE&&($("#div_chatter_container").html(""),d=g.active_channel.chat_messages);a.type==TYPE_LONG_CHAT_RENDER_MODE.TYPE_POSTFIX&&(d=g.active_channel.chat_messages_postfix);a.type==TYPE_LONG_CHAT_RENDER_MODE.TYPE_PREFFIX&&(d=g.active_channel.chat_messages_prefix);trace("MESSAGES TO RENDER "+d.length);for(var e=0;e<d.length;e++){var h=
d[e];db_chatMessages&&trace(h);var f="";void 0!=h.maker&&(g.device.isPC&&(f=Templates.Get("Chatter_Item")),g.device.isMobile|g.device.isTablet&&(f=Templates.Get("Chatter_Item_mob")),"undefined"!=h.makerimg?f=f.searchAndReplace("@AVATAR@","https://images.weserv.nl/?url="+h.makerimg+"&w=29&h=29"):f=f.searchAndReplace("@AVATAR@","images/no-avatar.png"),f=f.searchAndReplace("@LBL_NAME@",h.makername),f=f.searchAndReplace("@LBL_WEBID@",h.maker),f=a.type==TYPE_LONG_CHAT_RENDER_MODE.TYPE_POSTFIX|a.type==
TYPE_LONG_CHAT_RENDER_MODE.TYPE_PREFFIX?f.searchAndReplace("@BORDER@","solid"):f.searchAndReplace("@BORDER@","none"),f=f.searchAndReplace("@LBL_CONTENT@",b.makeHtml(h.content)),db_chatMessages&&trace("####### Date="+h.date),db_chatMessages&&trace("### TZOffset="+g.date.offset),f=f.searchAndReplace("@LBL_TIME@",0==g.preferences.date_format?jQuery.timeago(new Date(h.date)):moment(new Date(h.date)).add(g.date.offset,"hours").format("MMM Do YYYY, h:mm a")),c+=f)}g.device.isPC&&(a.type==TYPE_LONG_CHAT_RENDER_MODE.TYPE_REPLACE&&
(trace("render_mode.type == TYPE_LONG_CHAT_RENDER_MODE.TYPE_REPLACE"),$("#div_chatter_container").html(c)),a.type==TYPE_LONG_CHAT_RENDER_MODE.TYPE_POSTFIX&&(trace("render_mode.type == TYPE_LONG_CHAT_RENDER_MODE.TYPE_POSTFIX"),b=$("#div_chatter_container").html(),$("#div_chatter_container").html(b+c)),a.type==TYPE_LONG_CHAT_RENDER_MODE.TYPE_PREFFIX&&(trace("render_mode.type == TYPE_LONG_CHAT_RENDER_MODE.TYPE_PREFFIX"),b=$("#div_chatter_container").html(),$("#div_chatter_container").html(c+b)));g.device.isMobile|
g.device.isTablet&&(a.type==TYPE_LONG_CHAT_RENDER_MODE.TYPE_REPLACE&&$("#div_mob_chatter_container").html(c),a.type==TYPE_LONG_CHAT_RENDER_MODE.TYPE_POSTFIX&&(b=$("#div_mob_chatter_container").html(),$("#div_mob_chatter_container").html(b+c)),a.type==TYPE_LONG_CHAT_RENDER_MODE.TYPE_PREFFIX&&(b=$("#div_mob_chatter_container").html(),$("#div_mob_chatter_container").html(c+b)));0==g.state.bFirstRunSession?g.state.bFirstRunSession=!0:g.preferences.sounds&&window.sfx_new_chat.play();$(".avatar").popup({inline:!0,
hoverable:!0,delay:{show:200,hide:1500}});setScrollerToBottom("div_chatter_container")}
function solid_long_chat__renderLatestMessages(){var a,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return trace("solid_long_chat__renderLatestMessages() -> FIRED!"),d.yield(g.active_channel.chat.messages,2);a=d.yieldResult;trace("g.active_channel.chat_messages.length="+g.active_channel.chat_messages.length);trace("                  now_messages.length="+a.length);g.active_channel.chat_messages.length<a.length&&(b=a.length-g.active_channel.chat_messages.length,
c=a.slice(Math.max(a.length-b,1)),trace("now_messages="),trace(c),g.active_channel.chat_messages_postfix=[],g.active_channel.chat_messages_postfix.push(c[0]),solid_long_chat__renderMessages({type:TYPE_LONG_CHAT_RENDER_MODE.TYPE_POSTFIX,mark_as_unread:!0}),trace("only_latest_messages[0]="+c[0]),g.active_channel.chat_messages.push(c[0]),localStorage.setItem(g.favourite_channels.list[g.favourite_channels.selected].channel_name+"@"+g.active_channel.chat_pages._year+"-"+g.active_channel.chat_pages._month+
"-"+g.active_channel.chat_pages._day,JSON.stringify(g.active_channel.chat_messages)));d.jumpToEnd()})}function solid_long_chat_reply__onEnterCheck(){return 13===window.event.keyCode?(trace("ENTER Pressed!"),solid_long_chat__sendMessage(),!1):!0}
function solid_long_chat__sendMessage(){var a,b,c,d,e,h,f,l,k,n,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){trace("solid_long_chat__sendMessage() -> FIRED!");a="";if(!g.solid.isLogged)return alert("you must be logged into your Solid account to send messages!!"),v.jumpTo(0);g.device.isPC&&(a=$("#frm_lc_text_input").val().trim(),$("#frm_lc_text_input").val(""),$("#frm_lc_text_input").blur());g.device.isTablet&&(a=$("#frm_tab_lc_text_input").val().trim(),$("#frm_tab_lc_text_input").val(""),
$("#frm_tab_lc_text_input").blur());g.device.isMobile&&(a=$("#frm_mob_lc_text_input").val().trim(),$("#frm_mob_lc_text_input").val(""),$("#frm_mob_lc_text_input").blur());b=g.active_channel.chat_messages[g.active_channel.chat_messages.length-1];c=b.url;d=b.maker;e="InstantMessage";h={content:a,webId:g.solid.webId,postType:e,replyTo:c};g.active_channel.chat.message=h;solid_long_chat__suppress_self_send_notif=!0;if(!(0<d.length))return v.jumpTo(0);console.log("author",d);trace("--------------------------------");
trace("replyTo="+c);trace(" author="+d);trace("postType="+e);trace("--------------------------------");f=g.active_channel.chat.lastPost;l=g.solid.sh.pod();console.log("pod",l);l.webId=d;console.log("pod",l);n=k=new sh.inbox;return v.yield(l.inbox,4)}n.inbox=v.yieldResult;console.log("ib",k);w={sender:g.solid.webId,title:"solidarity reply",url:f,content:f+" is a "+e+" reply to' "+c,replyTo:c};k.message=w;v.jumpToEnd()})}var solid_long_chat__suppress_self_send_notif=!1;
function solid_long_chat__subscribe_onReceivedMessage(){1==solid_long_chat__suppress_self_send_notif?solid_long_chat__suppress_self_send_notif=!1:notifyMe({title:g.favourite_channels.list[g.favourite_channels.selected].channel_name+" Chat",body:"a new message has been posted.",icon:"favicon.png"});solid_long_chat__initLongChatInstance(!0)}
function solid_long_chat__setChannel(a,b){trace("!!!!! ONLY BE CALLED ONCE!!!!!!  solid_long_chat__setChannel() -> FIRED!");solid_long_chat__getPublicTypeIndex(a+"/profile/card#me",a,b)}function solid_long_chat__showChatter(){$("#div_mob_inputconsole__loggedin__avatar_container").css("display","inline");$("#div_mob_chatviewport_inputconsole").css("display","inline");$("#div_mob_chatter_container").css("display","inline");$("#div_mob_chatviewportbg").css("display","inline")}
function solid_long_chat__hideChatter(){$("#div_mob_inputconsole__loggedin__avatar_container").css("display","none");$("#div_mob_chatviewport_inputconsole").css("display","none");$("#div_mob_chatter_container").css("display","none");$("#div_mob_chatviewportbg").css("display","none")}
function solid_friends__getFriends(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){trace("solid_login__getFriends() -> FIRED!");sapi.getFriends(g.solid.webId,solid_friends__getStatusOfFriends);a.jumpToEnd()})}
function solid_friends__getStatusOfFriends(a,b){trace("solid_friends__getStatusOfFriends() -> FIRED!");g.solid.friends.list=a;g.solid.friends.webIds=b;for(a=g.solid.friends.loadCount=0;a<g.solid.friends.list.length;a++){b=(sapi.getFriendPropertiesByFriendIndex(g.solid.friends.list,a,"storage")+"public/apps/solidarity/").split("https://").join("");var c=b.split("/")[0],d=b.split(c)[1];trace("WS full="+b);trace("WS url="+c);trace("WS resource="+d);g.solid.websockets_attached||(b=new WSWatcher({url:c,
resource:d,name:b,data:"",callback:status__onCallback,onChangeCounterThreshold:1,isOneTimeWatcher:!1}),(new WSInit).add(b));trace(sapi.getFriendPropertiesByFriendIndex(g.solid.friends.list,a,"storage"));sapi.readFileParams(sapi.getFriendPropertiesByFriendIndex(g.solid.friends.list,a,"storage")+"public/apps/solidarity/status.json",solid_friends__getStatusOfFriends__onFriendLoaded,{index:a})}g.solid.websockets_attached=!0}
function solid_friends__getStatusOfFriends__onFriendLoaded(a,b){trace("solid_friends__getStatusOfFriends__onFriendLoaded() -> FIRED!");trace("Friend "+b.index+" Status="+JSON.parse(a).status);g.solid.friends.loadCount++;g.solid.friends.list[b.index].push({ns:"",name:"status",value:void 0!=JSON.parse(a).status?JSON.parse(a).status:""});g.solid.friends.loadCount==g.solid.friends.list.length&&solid_friends__renderFriends()}
function solid_friends__renderFriends(){trace("solid_login__renderFriends() -> FIRED!");$("#lbl_friends_count").html("&nbsp;("+g.solid.friends.list.length+")");for(var a=Templates.Get("Friend_Item"),b="",c="",d=0;d<g.solid.friends.list.length;d++){trace("RENDERING FRIEND... "+d);c=c+'<option value="'+d+'">'+g.solid.friends.webIds[d].uri.value+"</option>";b+=a.searchAndReplace("@AVATAR@",sapi.getFriendPropertiesByFriendIndex(g.solid.friends.list,d,"hasPhoto"));var e=sapi.getFriendPropertiesByFriendIndex(g.solid.friends.list,
d,"status"),h=!1;sapi.getFriendPropertiesByFriendIndex(g.solid.friends.list,d,"fn");switch(e){case "online":h="green";break;case "away":h="yellow";break;case "busy":h="red";break;case "offline":h=!1}h?(b=b.searchAndReplace("@STATUS@",'<a class="ui '+h+' empty circular label"></a>'),b=b.searchAndReplace("@OPACITY@","1")):(b=b.searchAndReplace("@STATUS@",""),b=b.searchAndReplace("@OPACITY@","0.4"))}b+='<div style="clear:both;"></div>';$("#div_pc_friends_list").html(b);$("#frm_compose_msg_view__to").html('<option value="">Select a friend</option>'+
c)}function solid_friends__getStatusOfMe(){sapi.readFileParams(g.solid.storage+"public/apps/solidarity/status.json",solid_friends__getStatusOfMe__onComplete,{index:-1})}
function solid_friends__getStatusOfMe__onComplete(a,b){trace("solid_friends__getStatusOfMe__onComplete() -> FIRED!");b=JSON.parse(a).status;trace("Me Status="+JSON.parse(a).status);switch(b){case "online":$("#cb_status_online").prop("checked",!0);break;case "away":$("#cb_status_away").prop("checked",!0);break;case "busy":$("#cb_status_busy").prop("checked",!0);break;case "offline":$("#cb_status_offline").prop("checked",!0),$("#pc_online_status").removeClass("red yellow green")}solid_friends__updateMeStatusDot(b)}
function solid_friends__updateMeStatusDot(a){switch(a){case "online":$("#pc_online_status").removeClass("red yellow green");$("#pc_online_status").addClass("green");break;case "away":$("#pc_online_status").removeClass("red yellow green");$("#pc_online_status").addClass("yellow");break;case "busy":$("#pc_online_status").removeClass("red yellow green");$("#pc_online_status").addClass("red");break;case "offline":$("#pc_online_status").removeClass("red yellow green")}}
var solid_rdf_store=$rdf.graph(),solid_rdf_fetcher=new $rdf.Fetcher(solid_rdf_store),solid_rdf_updater=new $rdf.UpdateManager(solid_rdf_store),sapi={_rdf_Namespace:{FOAF:$rdf.Namespace("http://xmlns.com/foaf/0.1/"),VCARD:$rdf.Namespace("http://www.w3.org/2006/vcard/ns#")},_auth:{},_fc:{},_session:{},_webId:{},init:function(a){solid.auth.trackSession(function(b){b?(sapi._auth=solid.auth,sapi._session=b,sapi._webId=b.webId,sapi._fc=new SolidFileClient(solid.auth),a(!0)):a(!1)})},itemExists:function(a,
b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(c._fc.itemExists(a),2);if(4!=d.nextAddress)return d.yieldResult?(b(!1),d.jumpTo(0)):d.yield(c._fc.createFolder(a).then(function(a){b(a)}),4);d.jumpToEnd()})},itemExists_TEST:function(){},getProfile_mappings:[{ns:"http://www.w3.org/2006/vcard/ns#",name:"fn",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasAddress",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasEmail",
value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasPhoto",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasTelephone",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"note",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"organization-name",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"role",value:""},{ns:"http://www.w3.org/ns/ldp#",name:"inbox",value:""},{ns:"http://www.w3.org/ns/pim/space#",name:"preferencesFile",value:""},{ns:"http://www.w3.org/ns/pim/space#",
name:"storage",value:""},{ns:"http://www.w3.org/ns/solid/terms#",name:"account",value:""},{ns:"http://www.w3.org/ns/solid/terms#",name:"privateTypeIndex",value:""},{ns:"http://www.w3.org/ns/solid/terms#",name:"publicTypeIndex",value:""},{ns:"http://xmlns.com/foaf/0.1/",name:"name",value:""}],getProfile:function(a,b){solid_rdf_fetcher.load(a).then(function(){for(var c=clone(sapi.getProfile_mappings),d=0;d<sapi.getProfile_mappings.length;d++){var e=$rdf.Namespace(sapi.getProfile_mappings[d].ns);try{c[d].value=
solid_rdf_store.any($rdf.sym(a),e(sapi.getProfile_mappings[d].name)).value}catch(h){c[d].value=""}}b&&b(clone(c));return c}).catch(function(a){console.log("SOLID-FILE_CLIENT Error! "+a)})},getFriends_mappings:[{ns:"http://www.w3.org/2006/vcard/ns#",name:"fn",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasPhoto",value:""},{ns:"http://www.w3.org/ns/ldp#",name:"inbox",value:""},{ns:"http://www.w3.org/ns/pim/space#",name:"storage",value:""},{ns:"http://xmlns.com/foaf/0.1/",name:"name",value:""}],
getFriends_profile_uris:[],getFriendsCount:0,getFriends_list:[],getFriends_onFriendsProfilesLoaded:function(){},getFriendPropertiesByFriendIndex:function(a,b,c){a=a[b];for(b=0;b<a.length;b++)if(a[b].name==c)return a[b].value},getFProp:this.getFriendPropertiesByFriendIndex,getFriends:function(a,b){sapi.getFriends_list=[];sapi.getFriends_profile_uris=[];sapi.getFriends_onFriendsProfilesLoaded=b;solid_rdf_fetcher.load($rdf.sym(a),sapi._rdf_Namespace.FOAF("knows")).then(function(){var a=solid_rdf_store.each($rdf.sym(sapi._webId),
sapi._rdf_Namespace.FOAF("knows"));sapi.getFriendsCount=a.length;trace("SOLID-FILE_CLIENT  You have "+sapi.getFriendsCount+" friend"+(1==sapi.getFriendsCount?"":"s"));for(var b=0;b<a.length;b++)trace("SOLID-FILE_CLIENT  friends=="+a[b]),sapi.getFriends_profile_uris.push(clone({uri:a[b]})),sapi.getProfile(a[b],function(a){trace("SOLID-FILE_CLIENT  friends profile loaded!");sapi.getFriends_list.push(clone(a));sapi.getFriends_list.length==sapi.getFriendsCount&&sapi.getFriends_onFriendsProfilesLoaded(sapi.getFriends_list,
sapi.getFriends_profile_uris)})}).catch(function(a){console.log("SOLID-FILE_CLIENT error getting friends! "+a)})},readFileParams:function(a,b,c){sapi._fc.readFile(a,b,c).then(function(a){if(b)b(a,c);else return!1}).catch(function(a){console.log(a);b(!1,c)})},createFile:function(a,b,c){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return d.yield(sapi._fc.createFile(a,b,"",c).then(function(b){if(c)c(b,a);else return b}).catch(function(a){console.log(a);c(!1,!1)}),0)})},readFolder:function(a,
b){sapi._fc.readFolder(a,b).then(function(a){if(b)b(a);else return a}).catch(function(c){console.log(c);b(a)})}},___solid={_rdf_Namespace:{FOAF:$rdf.Namespace("http://xmlns.com/foaf/0.1/"),VCARD:$rdf.Namespace("http://www.w3.org/2006/vcard/ns#")},_popupLoginUri:"https://solid.github.io/solid-auth-client/dist/popup.html",_auth:solid.auth,_fc:new SolidFileClient(this.auth),_logged:!1,_webId:"",_btn_login:"#login",_btn_logout:"#logout",checkSession_opts:{ENABLE_LOGGING:!1,AUTO_TOGGLE_BUTTONS:!0,AUTO_POLL_SESSION:!0,
CALLBACK:function(){}},checkSession:function(){this._auth.checkSession().then(function(a){solid._logged=!0;solid._webId=a.webId;solid.checkSession_opts.AUTO_TOGGLE_BUTTONS&&($(solid._btn_login).toggle(!1),$(solid._btn_logout).toggle(!0));solid.checkSession_opts.ENABLE_LOGGING&&console.log("SOLID-FILE_CLIENT success! logged in as: "+a.webId);solid.checkSession_opts.CALLBACK&&solid.checkSession_opts.CALLBACK({success:!0,webId:a.webId});return a.webId}).catch(function(a){solid.checkSession_opts.AUTO_TOGGLE_BUTTONS&&
($(solid._btn_login).toggle(!0),$(solid._btn_logout).toggle(!1));solid.checkSession_opts.ENABLE_LOGGING&&console.log(a);solid.checkSession_opts.CALLBACK&&solid.checkSession_opts.CALLBACK({success:!1,webId:!1,error:a})})},login_opts:{ENABLE_LOGGING:!1,SILENT:!1},login:function(a){0==solid.login_opts.SILENT&&this._fc.popupLogin().then(function(b){console.log("SOLID-FILE_CLIENT success! logged in as: "+b);a&&a(b)}).catch(function(a){console.log("SOLID-FILE_CLIENT Error! "+a)})},logout:function(){this._fc.logout().then(function(){console.log("Bye now!");
solid._logged=!1;$(solid._btn_login).toggle(!0);$(solid._btn_logout).toggle(!1)}).catch(function(a){console.log("SOLID-FILE_CLIENT Error! "+a)})},getProfile_mappings:[{ns:"http://www.w3.org/2006/vcard/ns#",name:"fn",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasAddress",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasEmail",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasPhoto",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasTelephone",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",
name:"note",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"organization-name",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"role",value:""},{ns:"http://www.w3.org/ns/ldp#",name:"inbox",value:""},{ns:"http://www.w3.org/ns/pim/space#",name:"preferencesFile",value:""},{ns:"http://www.w3.org/ns/pim/space#",name:"storage",value:""},{ns:"http://www.w3.org/ns/solid/terms#",name:"account",value:""},{ns:"http://www.w3.org/ns/solid/terms#",name:"privateTypeIndex",value:""},{ns:"http://www.w3.org/ns/solid/terms#",
name:"publicTypeIndex",value:""},{ns:"http://xmlns.com/foaf/0.1/",name:"name",value:""}],getProfile:function(a,b){solid_rdf_fetcher.load(a).then(function(){for(var c=clone(solid.getProfile_mappings),d=0;d<solid.getProfile_mappings.length;d++){var e=$rdf.Namespace(solid.getProfile_mappings[d].ns);try{c[d].value=solid_rdf_store.any($rdf.sym(a),e(solid.getProfile_mappings[d].name)).value}catch(h){c[d].value=""}}b&&b(clone(c));return c}).catch(function(a){console.log("SOLID-FILE_CLIENT Error! "+a)})},
getFriends_mappings:[{ns:"http://www.w3.org/2006/vcard/ns#",name:"fn",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasAddress",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasEmail",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasPhoto",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"hasTelephone",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"note",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",name:"organization-name",value:""},{ns:"http://www.w3.org/2006/vcard/ns#",
name:"role",value:""},{ns:"http://www.w3.org/ns/ldp#",name:"inbox",value:""},{ns:"http://www.w3.org/ns/pim/space#",name:"preferencesFile",value:""},{ns:"http://www.w3.org/ns/pim/space#",name:"storage",value:""},{ns:"http://www.w3.org/ns/solid/terms#",name:"account",value:""},{ns:"http://www.w3.org/ns/solid/terms#",name:"privateTypeIndex",value:""},{ns:"http://www.w3.org/ns/solid/terms#",name:"publicTypeIndex",value:""},{ns:"http://xmlns.com/foaf/0.1/",name:"name",value:""}],getFriends_profile_uris:[],
getFriendsCount:0,getFriends_list:[],getFriends_onFriendsProfilesLoaded:function(){},getFriendPropertiesByFriendIndex:function(a,b,c){a=a[b];for(b=0;b<a.length;b++)if(a[b].name==c)return a[b].value},getFProp:this.getFriendPropertiesByFriendIndex,getFriends:function(a,b){solid.getFriends_list=[];solid.getFriends_profile_uris=[];solid.getFriends_onFriendsProfilesLoaded=b;solid_rdf_fetcher.load($rdf.sym(a),solid._rdf_Namespace.FOAF("knows")).then(function(){var a=solid_rdf_store.each($rdf.sym(solid._webId),
solid._rdf_Namespace.FOAF("knows"));solid.getFriendsCount=a.length;trace("SOLID-FILE_CLIENT  You have "+solid.getFriendsCount+" friend"+(1==solid.getFriendsCount?"":"s"));for(var b=0;b<a.length;b++)trace("SOLID-FILE_CLIENT  friends=="+a[b]),solid.getFriends_profile_uris.push(clone({uri:a[b]})),solid.getProfile(a[b],function(a){trace("SOLID-FILE_CLIENT  friends profile loaded!");solid.getFriends_list.push(a);solid.getFriends_list.length==solid.getFriendsCount&&solid.getFriends_onFriendsProfilesLoaded(solid.getFriends_list,
solid.getFriends_profile_uris)})}).catch(function(a){console.log("SOLID-FILE_CLIENT error getting friends! "+a)})},createFolder:function(a,b){solid._fc.createFolder(a,b).then(function(){b&&b(!0)}).catch(function(a){console.log(a);b(!1)})},deleteFolder:function(a,b){trace("SOLID-FILE_CLIENT deleteFolder() -> FIRED!"+a);solid._fc.deleteFolder(a,b).then(function(){b&&b()}).catch(function(a){console.log(a)})},readFolder:function(a,b){solid._fc.readFolder(a,b).then(function(a){if(b)b(a);else return a}).catch(function(c){console.log(c);
b(a)})},copyFolder:function(a,b,c){solid._fc.copyFolder(a,b).then(function(a){if(c)c(a);else return a}).catch(function(a){console.log(a)})},createFile:function(a,b,c){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return d.yield(solid._fc.createFile(a,b,"",c).then(function(a){if(c)c(a);else return a}).catch(function(a){console.log(a)}),0)})},readFile:function(a,b){solid._fc.readFile(a,b).then(function(a){if(b)b(a);else return a}).catch(function(a){console.log(a)})},readFileParams:function(a,
b,c){solid._fc.readFile(a,b,c).then(function(a){if(b)b(a,c);else return!1}).catch(function(a){console.log(a);b(!1,c)})},updateFile:function(a,b,c,d){solid._fc.updateFile(a,b,c,d).then(function(){d&&d()}).catch(function(a){console.log(a)})},copyFile:function(a,b,c){solid._fc.copyFile(a,b,c).then(function(){c&&c()}).catch(function(a){console.log(a)})},deleteFile:function(a,b){solid._fc.deleteFile(a,b).then(function(c){if(b)b(a);else return a}).catch(function(a){console.log(a)})}};
function solid_channels__displayFavouriteChannels(){trace("solid_channels__displayFavouriteChannels() -> FIRED!");for(var a="",b="",c="",d=0;d<g.favourite_channels.list.length;d++)a=a+'<span onclick="solid_channels__changeChannels('+d+')" style="cursor:pointer;color:'+(d==g.favourite_channels.selected?"#855FFA":"#000000")+"; font-size:14px; font-weight:"+(d==g.favourite_channels.selected?"bold":"normal")+';">'+g.favourite_channels.list[d].channel_name+"</span><span id='favChannelList"+d+'\'></span><br><div style="width:40px;height:2px"></div>',
b=b+'<div class="item" onclick="solid_channels__removeFavouriteChannel('+d+')" style="font-size:16px;cursor:pointer;">'+g.favourite_channels.list[d].channel_name+'<i class="times circle icon" style="color:red; margin-left:5px; margin-top:0px"></i></div>',c=c+'<a class="'+(d==g.favourite_channels.selected?"active":"")+' item" onclick="navigation__mob__channels_select__onclick('+d+')">'+g.favourite_channels.list[d].channel_name+"</a>";$("#div_pc_channel_list").html(a);$("#div_remove_favourite_channel_list").html(b);
$("#div_mob__channels_select__container").html(c);$("#lbl_channel_count").html(" ("+g.favourite_channels.list.length+")")}
function solid_channels__changeChannels(a){trace("solid_channels__changeChannels() -> FIRED!"+a);g.favourite_channels.selected=a;solid_channels__displayFavouriteChannels();solid_long_chat__setChannel(g.favourite_channels.list[g.favourite_channels.selected].channel_url,g.favourite_channels.list[g.favourite_channels.selected].channel_name);cookie.set("Channels",JSON.stringify(g.favourite_channels))}
function solid_channels__addChannels(a,b){trace("solid_channels__addChannels() -> FIRED!, "+a+", "+b);g.favourite_channels.list.push({channel_name:a,channel_url:b});solid_channels__displayFavouriteChannels();cookie.set("Channels",JSON.stringify(g.favourite_channels));$("#div_remove_channel").css("display","inline")}
function solid_channels__removeFavouriteChannel(a){trace("solid_channels__removeFavouriteChannel() -> FIRED!"+a);g.favourite_channels.list.splice(a,1);0==g.favourite_channels.list.length?(g.favourite_channels.selected=-1,$("#div_pc_channel_list").html(""),$("#div_remove_favourite_channel_list").html(""),$("#div_remove_channel").css("display","none")):(g.favourite_channels.selected==a?g.favourite_channels.selected=0:g.favourite_channels.selected--,solid_channels__displayFavouriteChannels());cookie.set("Channels",
JSON.stringify(g.favourite_channels))}
function solid_channel__attachAddNewChannelEvents(){$("#frm_add_channel_name").focusout(function(){});$("#frm_add_channel_url").focusout(function(){});$("#btn_prefs_verify_channel").click(function(){solid_channels__checkChatExists();setTimeout(function(){g.state.isChannelExists||($("#div_modal_add_channel_validating").css("display","none"),$("#div_modal_add_channel_success").css("display","none"),$("#div_modal_add_channel_fail").css("display","inline-block"))},8E3)})}
function solid_channels__onEnterCheck(a){return 13===window.event.keyCode?(""!=$("#frm_add_channel_url").val().trim()&""!=$("#frm_add_channel_name").val().trim()&&solid_channels__checkChatExists(),!1):!0}
function solid_channels__checkChatExists(){function a(a){trace("checkChatFolderContents() -> FIRED!");trace(a);a.files[0].name="chat.ttl";g.state.isChannelExists=!0;trace("CHAT FOUND!");$("#div_modal_add_channel_validating").css("display","none");$("#div_modal_add_channel_fail").css("display","none");$("#div_modal_add_channel_success").css("display","inline-block")}function b(b){trace("checkChatFolderDays() -> FIRED!");trace(b);for(var c=0;c<b.folders.length;c++)f.push(b.folders[c].name);f.reverse();
sapi.readFolder(d+"/"+e[0]+"/"+h[0]+"/"+f[0],a)}function c(a){trace("checkChatFolderMonth() -> FIRED!");trace(a);for(var c=0;c<a.folders.length;c++)h.push(a.folders[c].name);h.reverse();sapi.readFolder(d+"/"+e[0]+"/"+h[0],b)}g.state.isChannelExists=!1;trace("solid_channels__checkChatExists() -> FIRED!");$("#div_modal_add_channel_validating").css("display","inline-block");$("#div_modal_add_channel_success").css("display","none");$("#div_modal_add_channel_fail").css("display","none");var d=$("#frm_add_channel_url").val().trim()+
"/public/"+$("#frm_add_channel_name").val().trim().split(" ").join(""),e=[],h=[],f=[];sapi.readFolder(d,function(a){trace("checkChatFolderYear() -> FIRED!");trace(a);for(var b=0;b<a.folders.length;b++)e.push(a.folders[b].name);e.reverse();sapi.readFolder(d+"/"+e[0],c)})}function solid_inbox__mentions_clicked(a){}
function solid_inbox__init(){trace("solid_inbox__init() -> FIRED!");trace("inbox location..");solid_inbox__getInbox();var a=g.solid.webId.split("/")[2]+"/inbox/",b=g.solid.webId.split("/")[2];a=new WSWatcher({url:b,resource:"/inbox/",name:a,data:"",callback:solid_inbox__onNewMessage,onChangeCounterThreshold:6,isOneTimeWatcher:!1});(new WSInit).add(a)}
function solid_inbox__onNewMessage(a){trace("solid_inbox__onNewMessage() -> FIRED! "+a);trace("ws_name");trace(a);notifyMe({title:"Inbox",body:"You have a new message to your Inbox.",icon:"favicon.png"});solid_inbox__getInbox()}
function solid_inbox__getInbox(){var a,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return trace("solid_inbox__getInbox() -> FIRED!"),g.solid.inbox=[],c.yield(g.solid.pod.inbox,2);if(3!=c.nextAddress)return a="https://"+g.solid.webId.split("/")[2]+"/inbox/",console.log(a),g.solid.user_inbox=new g.solid.sh.inbox,c.yield(g.solid.user_inbox.getMessages(a),3);b=c.yieldResult;trace("messages=");console.log(b);b.forEach(function(a){var b=0==g.preferences.date_format?
jQuery.timeago(new Date(a.dateSent)):moment(new Date(a.dateSent)).add(g.date.offset,"hours").format("MMM Do YYYY, h:mm a"),c=[a.url,a.label,a.sender,a.senderName,b,a.text].join(" || ");trace(c);g.solid.inbox.push({selected:!1,markasread:!1,sender:"undefined"==a.sender+""?"Unknown":a.sender+"",senderName:a.senderName,date:b+"",label:a.label+"",text:a.text+"",file:a.url+""})});trace("g.solid.inbox=");console.log(g.solid.inbox);solid_inbox__renderInbox();solid_inbox__updateMessageListCount();c.jumpToEnd()})}
function solid_inbox__updateMessageListCount(){$("#div_mob_inbox_contols__lbl_msg_count").html("You have "+(1==g.solid.inbox.length?g.solid.inbox.length+" Message":g.solid.inbox.length+" Messages"))}
function solid_inbox__renderInbox(){trace("solid_inbox__renderInbox() -> FIRED!");trace("g.solid.inbox=");trace(g.solid.inbox);var a="";$("#div_mob_inbox_container").html("");for(var b=0;b<g.solid.inbox.length;b++){var c=g.solid.inbox[b];var d=Templates.Get("Inbox_Item");try{d=d.searchAndReplace("@SENDER@",c.sender.split("://")[1].split(".")[0])}catch(e){d=d.searchAndReplace("@SENDER@",c.sender)}d=d.searchAndReplace("@DATETIME@",c.date);d=d.searchAndReplace("@TEXT@",c.label);d=d.searchAndReplace("@ID@",
b);a+=d}$("#div_mob_inbox_container").html(a)}function solid_inbox__showInbox(){$("#div_mob_inbox_container").css("display","inline");$("#div_mob_inbox_contols").css("display","inline")}
function solid_inbox__hideInbox(){$("#div_mob_inbox_container").css("display","none");$("#div_mob_inbox_contols").css("display","none");$("#div_mob_inbox_contols__messageview").css("display","none");$("#div_mob_inbox_container__msg_view").css("display","none");$("#div_mob_inbox_contols__composeview").css("display","none");$("#div_mob_inbox_container__composeview").css("display","none")}
function solid_inbox__messageView_checkbox_onclick(a){trace("solid_inbox__messageView_checkbox_onclick() -> FIRED!");trace("index="+a+", selected="+$("#cb_inbox_messages_"+a).is(":checked"));g.solid.inbox[a].selected=$("#cb_inbox_messages_"+a).is(":checked")}
function solid_inbox__deleteInboxListItem(){var a,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:trace("solid_inbox__deleteInboxListItem() -> FIRED!"),b=a=0;case 2:if(!(b<g.solid.inbox.length)){d.jumpTo(4);break}c=g.solid.inbox[b];if(1!=c.selected){d.jumpTo(3);break}return d.yield(g.solid.user_inbox.delete(c.file),6);case 6:a++;case 3:b++;d.jumpTo(2);break;case 4:notifyMe({title:"Inbox",body:a+(1==a)?" message has been deleted from your Inbox!":" messages have been deleted from your Inbox!",
icon:"favicon.png"}),solid_inbox__getInbox(),d.jumpToEnd()}})}function solid_inbox__composeMessage(){solid_inbox__hideInbox();$("#frm_compose_msg_view__from").val(g.solid.webId);$("#div_mob_inbox_contols__composeview").css("display","inline");$("#div_mob_inbox_container__composeview").css("display","inline")}
function solid_inbox__composeView_onclick_send(){var a,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){trace("solid_inbox__composeView_onclick_send() -> FIRED!");a={};a.content=$("#frm_compose_msg_view__message").val();a.title=$("#frm_compose_msg_view__subject").val();a.sender=g.solid.webId;trace("msg=");trace(a);trace("g.solid.friends.webIds[ $('#frm_compose_msg_view__to option:selected').val() ].uri.value=");trace(g.solid.friends.webIds[$("#frm_compose_msg_view__to option:selected").val()].uri.value);
b=g.solid.friends.webIds[$("#frm_compose_msg_view__to option:selected").val()].uri.value.split("profile/card#me")[0]+"inbox/";trace("to=");trace(b);c=new g.solid.sh.inbox(b);c.message=a;$("#frm_compose_msg_view__message").val("");$("#frm_compose_msg_view__subject").val("");$("#frm_compose_msg_view__to option:selected").val("");notifyMe({title:"Inbox",body:"Your message has been sent.",icon:"favicon.png"});solid_inbox__composeView_onclick_back();d.jumpToEnd()})}
function solid_inbox__messageView_onclick(a){trace(a);solid_inbox__hideInbox();$("#div_mob_inbox_contols__messageview").css("display","inline");$("#div_mob_inbox_container__msg_view").css("display","inline");a=g.solid.inbox[a];var b=Templates.Get("Inbox_Item_Message");try{b=b.searchAndReplace("@SENDER@",a.sender.split("://")[1].split(".")[0])}catch(c){b=b.searchAndReplace("@SENDER@",a.sender)}b=b.searchAndReplace("@DATETIME@",a.date);b=b.searchAndReplace("@LABEL@",a.label);b=b.searchAndReplace("@TEXT@",
a.text);$("#div_mob_inbox_container__msg_view").html(b)}function solid_inbox__messageView_onclick_back(){solid_inbox__hideInbox();$("#div_mob_inbox_contols").css("display","inline");$("#div_mob_inbox_container").css("display","inline")}function solid_inbox__composeView_onclick_back(){solid_inbox__hideInbox();$("#div_mob_inbox_contols").css("display","inline");$("#div_mob_inbox_container").css("display","inline")}var solid_inbox__messageCount=0,solid_inbox__messageTotal=0;
function solid_inbox__onInboxDirLoaded(a){trace("solid_inbox__onInboxDirLoaded() -> FIRED!");solid_inbox__messageCount=0;solid_inbox__messageTotal=a.files.length-1;for(var b=0;b<a.files.length-1;b++){var c=trimTrailingChars(a.files[b].url,"/");sapi.readFileParams(c,solid_inbox__onInboxFileLoaded,c)}}
function solid_inbox__onInboxFileLoaded(a,b){solid_inbox__messageCount++;g.solid.inbox.push({message:solid_inbox__messageCount,body:clone(a),file:b});solid_inbox__messageCount==solid_inbox__messageTotal&&solid_inbox__onInboxFilesLoadComplete()}
function solid_inbox__onInboxFilesLoadComplete(){trace("solid_inbox__onInboxFilesLoadComplete() -> FIRED!");for(var a=[],b=0;b<g.solid.inbox.length;b++)try{var c=solid_inbox__parseMessage(g.solid.inbox[b].body);c.file=g.solid.inbox[b].file;a.push(c)}catch(d){}g.solid.inbox=a;g.solid.inbox=g.solid.inbox.reverse();solid_inbox__updateMessageListCount();solid_inbox__renderInbox()}
function solid_inbox__parseMessage(a){trace("solid_inbox__parseMessage() -> FIRED!");var b=a.split("\n");a=solid_inbox__parseLabel(b,"@prefix c:");a=a[0].body.split("<").join("").split(">.").join("").split(" ").join("");var c=solid_inbox__parseLabel(b,"schem:dateSent");c=c[0].body.split(";").join("").split('"').join("").split(" ").join("");var d=solid_inbox__parseLabel(b,"rd:label");d=d[0].body.slice(0,-2).substring(2);b=solid_inbox__parseLabel(b,"schem:text");b=b[0].body.slice(0,-2).substring(2);
return{sender:a,date:c,label:d,text:b,file:""}}function solid_inbox__parseLabel(a,b){for(var c=[],d=0,e=0;e<a.length;e++)-1!=a[e].indexOf(b)&&(c.push({line:e,body:a[e].split(b)[1]}),d++);return c}
function modals__add_channel_show(){$("#div_modal_add_channel_validating").css("display","none");$("#div_modal_add_channel_success").css("display","none");$("#div_modal_add_channel_fail").css("display","none");$("#modal_add_channel").modal({closable:!0,onDeny:function(){$("#frm_add_channel_name").val("");$("#frm_add_channel_url").val("")},onApprove:function(){solid_channels__addChannels($("#frm_add_channel_name").val().trim().split(" ").join(""),$("#frm_add_channel_url").val().trim());$("#frm_add_channel_name").val("");
$("#frm_add_channel_url").val("")}}).modal("show")}function modals__manage_channels_show(){$("#modal_manage_channels").modal({closable:!0,onDeny:function(){},onApprove:function(){}}).modal("show")}function modals__preferences_show(){$("#modal_preferences").modal({closable:!0,onDeny:function(){},onApprove:function(){preferences__done()}}).modal("show")}function modals__status_show(){$("#modal_status").modal({closable:!0,onDeny:function(){},onApprove:function(){status__done()}}).modal("show")}
function navigation__chatterModeClicked(){}function navigation_tabs_onclick(a){}function navigation__findOutMore(){openwindow("https://github.com/scenaristeur/solidarity")}function navigation__mob__channels_select(){$("#div_mob__channels_select").sidebar("setting","transition","overlay").sidebar("toggle")}function navigation__mob__channels_select__onclick(a){$("#div_mob__channels_select").sidebar("setting","transition","overlay").sidebar("toggle");solid_channels__changeChannels(a)}
function navigation__showPage(a){switch(a){case "CHATTER":navigation__hideAllPages();solid_long_chat__showChatter();break;case "INBOX":navigation__hideAllPages(),solid_inbox__showInbox()}}function navigation__hideAllPages(){solid_long_chat__hideChatter();solid_inbox__hideInbox()}
function preferences__show(){$("#cb_preferences_use_sounds").prop("checked",g.preferences.sounds);0==g.preferences.date_format?$("#cb_preferences_timeformat_0").prop("checked",!0):$("#cb_preferences_timeformat_0").prop("checked",!1);1==g.preferences.date_format?$("#cb_preferences_timeformat_1").prop("checked",!0):$("#cb_preferences_timeformat_1").prop("checked",!1);modals__preferences_show()}
function preferences__done(){g.preferences.sounds=$("#cb_preferences_use_sounds").is(":checked");$("#cb_preferences_timeformat_0").is(":checked")?g.preferences.date_format=0:g.preferences.date_format=1;cookie.set("Preferences",JSON.stringify(g.preferences))}function preferences__get(){}function status__show(){modals__status_show()}
function status__done(){var a="";$("#cb_status_busy").is(":checked")&&(a="busy");$("#cb_status_online").is(":checked")&&(a="online");$("#cb_status_away").is(":checked")&&(a="away");$("#cb_status_offline").is(":checked")&&(a="offline");solid_friends__updateMeStatusDot(a);sapi.createFile(g.solid.storage+"public/apps/solidarity/status.json",'{"status":"'+a+'"}',status__onStatusChanged)}function status__onStatusChanged(a,b){trace("status__onStatusChanged() -> FIRED!");trace(a)}
function status__addWebsocketListen(a,b){trace("status__addWebsocketListen() -> FIRED!");if(!("WebSocket"in window))return alert("Your browser doesn't support latest Websockets"),!1;var c=new WebSocket("wss://"+a+"/");c.onopen=function(){this.send("sub wss://"+a+b)};c.onmessage=function(a){trace("socket.onmessage() -> FIRED!");a.data&&"pub"===a.data.slice(0,3)&&(trace(a),sapi.getFriends(g.solid.webId,solid_friends__getStatusOfFriends))}}
function status__onCallback(a){trace("status__onCallback() -> FIRED! name="+a);sapi.getFriends(g.solid.webId,solid_friends__getStatusOfFriends)}function status__userMessage(a,b){trace("status__userMessage() -> FIRED!");$("#logged_in_pc").css("opacity",0).css("display","inline-block");$("#logged_in_pc_msg").html(a);TweenMax.to($("#logged_in_pc"),.5,{opacity:1,delay:.5,onComplete:_status__messageDisplayed,onCompleteParams:[b]})}
function _status__messageDisplayed(a){trace("status__messageDisplayed() -> FIRED!");setTimeout(function(){TweenMax.to($("#logged_in_pc"),.5,{opacity:1,delay:.5,onComplete:_status__messageHidden,onCompleteParams:[a]})},2E3)}function _status__messageHidden(){trace("status__messageHidden() -> FIRED!");$("#logged_in_pc").css("opacity",0).css("display","inline-block")}
function WSWatcher(a){trace("XXXXXXXXXXXXXXXX new WSWatcher() -> FIRED!");this._onChangeCounter=0;this._name=a.name;this._socket={};this.url=a.url;this.resource=a.resource;this.data=a.data;this.callback=a.callback;this._onChangeCounter=0;this.onChangeCounterThreshold=a.onChangeCounterThreshold;this.isOneTimeWatcher=a.isOneTimeWatcher}
function WSInit(){trace("XXXXXXXXXXXXXXXX WS() -> FIRED!");this.list=[];this.add=function(a){trace("XXXXXXXXXXXXXXXX WS.prototype.AddWatcher() -> FIRED! "+a);this.list.push(a);this.data=a;if(!("WebSocket"in window))return alert("Your browser doesn't support latest Websockets"),!1;var b=a._socket;try{b=new WebSocket("wss://"+a.url+"/"),b.onopen=function(){this.send("sub wss://"+a.url+a.resource)},b.onmessage=function(b){trace("XXXXXXXXXXXXXXXX socket.onmessage() -> FIRED! name:"+a._name);b.data&&"pub"===
b.data.slice(0,3)&&(a._onChangeCounter++,trace(b),trace(a._onChangeCounter),a.onChangeCounterThreshold==a._onChangeCounter&&a.callback(a._name))}}catch(c){}}}function install__installApplicationFolders(){trace("install__installApplicationFolders() -> FIRED!");solid.createFile(g.solid.storage+"public/apps/solidarity/status.json",'{"status":"offline"}',install__installApplicationFolders__onComplete)}
function install__installApplicationFolders__onComplete(a){trace("install__installApplicationFolders__onComplete() -> FIRED! success="+a)}function install__installApplicationFolderApps__onComplete(a){trace("install__installApplicationFolderApps__onComplete() -> FIRED!");a?install__installApplicationFolders():trace(g.solid.storage+"public/Apps  Failed to be created in your pod!")};
